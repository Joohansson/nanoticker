<!DOCTYPE html>
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<html lang="en">
<head>
	<title>NanoTicker</title>
	<meta name="application-name" content="netdata">

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=2.0, minimum-scale=0.5, shrink-to-fit=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<meta property="og:locale" content="en_US" />
	<meta property="og:url" content="https://nanoticker.info"/>
	<meta property="og:type" content="website"/>
	<meta property="og:site_name" content="NanoTicker"/>
	<meta property="og:title" content="NanoTicker - Realtime Performance"/>
	<meta property="og:description" content="Displays combined statistics from public Nano monitors along with individual node stats." />

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#2d89ef">
  <meta name="theme-color" content="#ffffff">

  <meta name="nano" content="xrb_1gur37mt5cawjg5844bmpg8upo4hbgnbbuwcerdobqoeny4ewoqshowfakfo"/>

	<link rel="stylesheet" type="text/css" href="css/reps.css?ver=20200617-1">
  <!--<link rel="stylesheet" href="css/jquery-ui-1.12.1.min.css">-->
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
  <!-- MDBootstrap Datatables  -->
  <link href="css/addons/datatables.min.css" rel="stylesheet">
  <!--<link href="css/addons/datatables-select.min.css" rel="stylesheet">-->

  <!-- JQuery -->
  <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
  <!-- For jquery tooltip -->
  <!--<script src="https://code.jquery.com/jquery-1.12.4.js"></script>-->
  <script src="js/jquery-ui-1.12.1.min.js"></script>
  <!-- Bootstrap tooltips -->
  <!--<script type="text/javascript" src="js/popper.min.js"></script>-->
  <!-- MDBootstrap Datatables  -->
  <script type="text/javascript" src="js/addons/datatables.min.js"></script>
  <script type="text/javascript" src="js/addons/datatables-select.min.js"></script>
  <!-- Cookie plugin -->
  <script type="text/javascript" src="js/js.cookie.js"></script>

  <!-- INIT -->
  <script>
    //CUSTOM VARS
    var monitorsUpdateInterval = 20000; //Interval for client side update
    var monitorFile = 'json/monitors-v21.json'
    var statFile = 'json/stats-v21.json'
    var explorerBaseUrl = 'https://nanocrawler.cc/explorer/account/'
    //var prColor = '#4a90e2'
    var GAPageName = 'main-net'
    var GATableName = 'Table-main'
  </script>
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-113887773-1', 'auto');
    ga('send', 'pageview', GAPageName);
  </script>
  <!-- End Google Analytics -->
</head>
<body>

<div class="div-main">
  <div class="title-text">
    <h1>NanoTicker - Network Performance</h1>
    <h5>Combined measurements across public <a href="https://github.com/NanoTools/nanoNodeMonitor" target="_blank">Nano Node Monitors</a>. Hover/touch titles for info.</h5>
    <div>
      <span class="title" title="Hide all charts for better performance.<br/>
      Can help on mobile to refresh charts.">Charts</span>
      <label class="switch">
        <input type="checkbox" id="chart-switch" name="chart-switch" checked>
        <span class="slider round"></span>
      </label>
      <span class="title" id="filter-span" title="Only displays stats from Principal Representatives.<br/>
      A PR node has more than 0.1% of online weight and those are the only ones that votes in
      the network and thus the most important for the overall performance.">PR Only</span>
      <label class="switch">
        <input type="checkbox" id="pr-switch" name="pr-switch" checked>
        <span class="slider round"></span>
      </label>
    </div>
  </div>
  <div class="section"></div>
	<div class="div-float left show-charts">
    <div class="div-graph">
			<div class="div-header">
				<span class="title" title="Block count (checked) and cemented blocks (confirmed).<br/>
        Value from the top node.">Checked and Confirmed [MAX]</span>
			</div>
			<div class="div-graph-data chart-normal">
				<div data-netdata="repstats_v21_local.block_count_max"
					data-title="Checked Blocks Max"
				  data-decimal-digits="0"
					data-common-max="repstats_v21_local.block_count_max"
					data-common-min="repstats_v21_local.block_count_max"
					data-chart-library="dygraph"
					data-width="90%"
					data-height="100%"
					data-after="-4500"
					data-colors="#747de8 #7ad96e"
				></div>
			</div>
      <div class="div-graph-data chart-pr">
				<div data-netdata="repstats_v21_local.block_count_max_pr"
					data-title="PR: Checked Blocks Max"
				  data-decimal-digits="0"
					data-common-max="repstats_v21_local.block_count_max_pr"
					data-common-min="repstats_v21_local.block_count_max_pr"
					data-chart-library="dygraph"
					data-width="90%"
					data-height="100%"
					data-after="-4500"
					data-colors="#747de8 #7ad96e"
				></div>
			</div>
		</div>
    <div class="div-graph">
			<div class="div-header">
        <span class="title" title="BPS (blocks per second) and CPS (confirmations per second) averaged over 30 sec.<br/>
        Value taken from the peer with the highest block / cemented count.">BPS and CPS 30 sec average [MAX]</span>
			</div>
			<div class="div-graph-data chart-normal">
				<div data-netdata="repstats_v21_local.tps_max"
					data-title="TPS Average Max"
					data-decimal-digits="3"
					data-common-max="repstats_v21_local.tps_max"
					data-common-min="repstats_v21_local.tps_max"
					data-dygraph-valuerange="0, data-common-max"
					data-chart-library="dygraph"
					data-width="90%"
					data-height="100%"
					data-after="-4500"
					data-colors="#747de8 #7ad96e"
				></div>
			</div>
      <div class="div-graph-data chart-pr">
				<div data-netdata="repstats_v21_local.tps_max_pr"
					data-title="PR: TPS Average Max"
					data-decimal-digits="3"
					data-common-max="repstats_v21_local.tps_max_pr"
					data-common-min="repstats_v21_local.tps_max_pr"
					data-dygraph-valuerange="0, data-common-max"
					data-chart-library="dygraph"
					data-width="90%"
					data-height="100%"
					data-after="-4500"
					data-colors="#747de8 #7ad96e"
				></div>
			</div>
		</div>
    <div class="div-graph">
      <div class="div-header">
        <span class="title" title="Unchecked blocks from block count.<br/>
        Maximum, Median and Minimum from all monitored nodes.">Unchecked Blocks</span>
      </div>
      <div class="div-graph-data chart-normal">
        <div data-netdata="repstats_v21_local.unchecked"
          data-title="Unchecked"
          data-decimal-digits="0"
          data-common-max="repstats_v21_local.unchecked"
          data-common-min="repstats_v21_local.unchecked"
          data-dygraph-valuerange="0, data-common-max"
          data-chart-library="dygraph"
          data-width="90%"
          data-height="100%"
          data-after="-4500"
          data-colors="#e87474 #7ad96e #747de8"
        ></div>
      </div>
      <div class="div-graph-data chart-pr">
        <div data-netdata="repstats_v21_local.unchecked_pr"
          data-title="PR: Unchecked"
          data-decimal-digits="0"
          data-common-max="repstats_v21_local.unchecked_pr"
          data-common-min="repstats_v21_local.unchecked_pr"
          data-dygraph-valuerange="0, data-common-max"
          data-chart-library="dygraph"
          data-width="90%"
          data-height="100%"
          data-after="-4500"
          data-colors="#e87474 #7ad96e #747de8"
        ></div>
      </div>
    </div>
    <div class="div-graph">
	    <div class="div-header">
        <span class="title" title="Connection count to other nodes.<br/>
        Maximum, Median and Minimum from all monitored nodes.">Connected Peers</span>
	    </div>
	    <div class="div-graph-data chart-normal">
        <div data-netdata="repstats_v21_local.peers"
          data-title="Peers"
          data-decimal-digits="0"
          data-common-max="repstats_v21_local.peers"
          data-common-min="repstats_v21_local.peers"
          data-dygraph-valuerange="0, data-common-max"
          data-chart-library="dygraph"
          data-width="90%"
          data-height="100%"
          data-after="-4500"
          data-colors="#e87474 #7ad96e #747de8"
        ></div>
	    </div>
      <div class="div-graph-data chart-pr">
        <div data-netdata="repstats_v21_local.peers_pr"
          data-title="PR: Peers"
          data-decimal-digits="0"
          data-common-max="repstats_v21_local.peers_pr"
          data-common-min="repstats_v21_local.peers_pr"
          data-dygraph-valuerange="0, data-common-max"
          data-chart-library="dygraph"
          data-width="90%"
          data-height="100%"
          data-after="-4500"
          data-colors="#e87474 #7ad96e #747de8"
        ></div>
	    </div>
    </div>
    <div class="div-graph">
      <div class="div-header">
        <span class="title" title="Active difficulty multiplier.<br/>
        Maximum, Median and Minimum from all monitored nodes.">Active Difficulty</span>
      </div>
      <div class="div-graph-data chart-normal">
        <div data-netdata="repstats_v21_local.multiplier"
          data-title="Difficulty"
          data-decimal-digits="3"
          data-common-max="repstats_v21_local.multiplier"
          data-common-min="repstats_v21_local.multiplier"
          data-chart-library="dygraph"
          data-width="90%"
          data-height="100%"
          data-after="-4500"
          data-colors="#e87474 #7ad96e #747de8"
        ></div>
      </div>
      <div class="div-graph-data chart-pr">
        <div data-netdata="repstats_v21_local.multiplier_pr"
          data-title="PR: Difficulty"
          data-decimal-digits="3"
          data-common-max="repstats_v21_local.multiplier_pr"
          data-common-min="repstats_v21_local.multiplier_pr"
          data-chart-library="dygraph"
          data-width="90%"
          data-height="100%"
          data-after="-4500"
          data-colors="#e87474 #7ad96e #747de8"
        ></div>
      </div>
    </div>
    <div class="div-graph">
      <div class="div-header">
        <span class="title" title="Number of unique measurements used in this system.<br/>
        The top number represents the max amount of discovered monitors.<br/>
        Nodes with a block count below 50% of the maximum block count is not included.">Connected Data Points</span>
      </div>
      <div class="div-graph-data chart-normal">
        <div data-netdata="repstats_v21_local.supported"
          data-title="Stat Support"
          data-decimal-digits="0"
          data-common-max="repstats_v21_local.supported"
          data-common-min="repstats_v21_local.supported"
          data-chart-library="dygraph"
          data-width="90%"
          data-height="100%"
          data-after="-4500"
          data-colors="#d7d7d7 #747de8 #7ad96e #e7893d #e87474 #e174e8"
        ></div>
      </div>
      <div class="div-graph-data chart-pr">
        <div data-netdata="repstats_v21_local.supported_pr"
          data-title="PR: Stat Support"
          data-decimal-digits="0"
          data-common-max="repstats_v21_local.supported_pr"
          data-common-min="repstats_v21_local.supported_pr"
          data-chart-library="dygraph"
          data-width="90%"
          data-height="100%"
          data-after="-4500"
          data-colors="#d7d7d7 #747de8 #7ad96e #e7893d #e87474 #e174e8"
        ></div>
      </div>
    </div>
  </div>

	<div class="div-float right show-charts">
		<div class="div-graph">
			<div class="div-header">
				<span class="title" title="Block count (checked) and cemented blocks (confirmed).<br/>
        Median value from all monitored nodes.">Checked and Confirmed [MEDIAN]</span>
			</div>
			<div class="div-graph-data chart-normal">
				<div data-netdata="repstats_v21_local.block_count_median"
					data-title="Block Count Median"
				  data-decimal-digits="0"
					data-common-max="repstats_v21_local.block_count_median"
					data-common-min="repstats_v21_local.block_count_median"
					data-chart-library="dygraph"
					data-width="90%"
					data-height="100%"
					data-after="-4500"
					data-colors="#747de8 #7ad96e"
				></div>
			</div>
      <div class="div-graph-data chart-pr">
				<div data-netdata="repstats_v21_local.block_count_median_pr"
					data-title="PR: Block Count Median"
				  data-decimal-digits="0"
					data-common-max="repstats_v21_local.block_count_median_pr"
					data-common-min="repstats_v21_local.block_count_median_pr"
					data-chart-library="dygraph"
					data-width="90%"
					data-height="100%"
					data-after="-4500"
					data-colors="#747de8 #7ad96e"
				></div>
			</div>
		</div>
		<div class="div-graph">
			<div class="div-header">
				<span class="title" title="BPS (blocks per second) and CPS (confirmations per second) averaged over 30 sec.<br/>
        Median value from all monitored nodes.">BPS and CPS 30 sec average [MEDIAN]</span>
			</div>
			<div class="div-graph-data chart-normal">
				<div data-netdata="repstats_v21_local.tps_median"
					data-title="TPS Average Median"
					data-decimal-digits="3"
					data-common-max="repstats_v21_local.tps_median"
					data-common-min="repstats_v21_local.tps_median"
					data-dygraph-valuerange="0, data-common-max"
					data-chart-library="dygraph"
					data-width="90%"
					data-height="100%"
					data-after="-4500"
					data-colors="#747de8 #7ad96e"
				></div>
			</div>
      <div class="div-graph-data chart-pr">
				<div data-netdata="repstats_v21_local.tps_median_pr"
					data-title="PR: TPS Average Median"
					data-decimal-digits="3"
					data-common-max="repstats_v21_local.tps_median_pr"
					data-common-min="repstats_v21_local.tps_median_pr"
					data-dygraph-valuerange="0, data-common-max"
					data-chart-library="dygraph"
					data-width="90%"
					data-height="100%"
					data-after="-4500"
					data-colors="#747de8 #7ad96e"
				></div>
			</div>
		</div>
		<div class="div-graph">
      <div class="div-header">
        <span class="title" title="Block confirmation time past 10min or max 2048 blocks.<br/>
        <b>The percentiles</b> are represented as median values from all monitored nodes.<br/>
        <b>perc 50</b>: Median of Median<br/>
        <b>perc 99</b>: 99% of blocks were confirmed that fast<br/>
        <b>ave min</b>: The lowest average value, taken from one node">Block Confirmation Time [MEDIAN]</span>
      </div>
      <div class="div-graph-data chart-normal">
        <div data-netdata="repstats_v21_local.confirmations"
          data-title="Percentiles over 10min or max 2048 blocks | P50=Median"
          data-decimal-digits="0"
          data-common-max="repstats_v21_local.confirmations"
          data-common-min="repstats_v21_local.confirmations"
          data-chart-library="dygraph"
          data-dygraph-theme="logscale"
          data-width="90%"
          data-height="100%"
          data-after="-4500"
          data-colors="#d7d7d7 #747de8 #7ad96e #e7893d #e87474"
        ></div>
      </div>
      <div class="div-graph-data chart-pr">
        <div data-netdata="repstats_v21_local.confirmations_pr"
          data-title="PR: Percentiles over 10min or max 2048 blocks | P50=Median"
          data-decimal-digits="0"
          data-common-max="repstats_v21_local.confirmations_pr"
          data-common-min="repstats_v21_local.confirmations_pr"
          data-chart-library="dygraph"
          data-dygraph-theme="logscale"
          data-width="90%"
          data-height="100%"
          data-after="-4500"
          data-colors="#d7d7d7 #747de8 #7ad96e #e7893d #e87474"
        ></div>
      </div>
    </div>
    <div class="div-graph">
	    <div class="div-header">
        <span class="title" title="Difference from maximum recorded blocks.<br/>
        Max and Median from all monitored nodes.">Block Diff Status</span>
	    </div>
	    <div class="div-graph-data chart-normal">
        <div data-netdata="repstats_v21_local.block_diff"
          data-title="Block Diff"
          data-decimal-digits="0"
          data-common-max="repstats_v21_local.block_diff"
          data-common-min="repstats_v21_local.block_diff"
          data-chart-library="dygraph"
          data-width="90%"
          data-height="100%"
          data-after="-4500"
          data-colors="#e87474 #7ad96e #747de8"
        ></div>
	    </div>
      <div class="div-graph-data chart-pr">
        <div data-netdata="repstats_v21_local.block_diff_pr"
          data-title="PR: Block Diff"
          data-decimal-digits="0"
          data-common-max="repstats_v21_local.block_diff_pr"
          data-common-min="repstats_v21_local.block_diff_pr"
          data-chart-library="dygraph"
          data-width="90%"
          data-height="100%"
          data-after="-4500"
          data-colors="#e87474 #7ad96e #747de8"
        ></div>
	    </div>
	   </div>
     <div class="div-graph">
       <div class="div-header">
         <span class="title" title="Time in milliseconds that each monitor API itself consumes for RPC commands (after each cache expiration).<br/>
         Maximum, Median and Minimum from all monitored nodes.">Node Monitor API Processing</span>
       </div>
       <div class="div-graph-data chart-normal">
         <div data-netdata="repstats_v21_local.api_time"
           data-title="API Process"
           data-decimal-digits="0"
           data-common-max="repstats_v21_local.api_time"
           data-common-min="repstats_v21_local.api_time"
           data-chart-library="dygraph"
           data-width="90%"
           data-height="100%"
           data-after="-4500"
           data-colors="#e87474 #7ad96e #747de8"
         ></div>
       </div>
       <div class="div-graph-data chart-pr">
         <div data-netdata="repstats_v21_local.api_time_pr"
           data-title="PR: API Process"
           data-decimal-digits="0"
           data-common-max="repstats_v21_local.api_time_pr"
           data-common-min="repstats_v21_local.api_time_pr"
           data-chart-library="dygraph"
           data-width="90%"
           data-height="100%"
           data-after="-4500"
           data-colors="#e87474 #7ad96e #747de8"
         ></div>
       </div>
     </div>
     <div class="div-graph">
       <div class="div-header">
         <span class="title" title="Portion of connected nodes and portion of weight of the current supply.<br/>
         <b>latest_version:</b> Nodes running on latest version<br/>
         <b>tcp:</b> Nodes running tcp<br/>
         <b>stake_req:</b> Required weight needed for confirmations<br/>
         <b>stake_tot:</b> Total connected weight">Protocol and Connected Weight [nanoticker.info]</span>
       </div>
       <div class="div-graph-data">
         <div data-netdata="repstats_v21_local.peerstat"
           data-title="Protocol and weight from connected nodes"
           data-decimal-digits="1"
           data-common-max="100"
           data-common-min="repstats_v21_local.peerstat"
           data-units="%"
           data-chart-library="dygraph"
           data-width="90%"
           data-height="100%"
           data-after="-4500"
           data-colors="#d7d7d7 #747de8 #7ad96e #e7893d #e87474"
         ></div>
       </div>
     </div>
  </div>
  <div class="section"></div>
  <div class="table-info">
    <span class="title" title="Discovered monitors with a block count above 50% of max block count.<br/>
    Empty cells means corresponding NodeMonitor does not have full support. Please consider upgrading!">Data from </span>
    <span class="title" id="monitorCount"></span><span class="title"> Monitors and </span><span class="title" id="telemetryCount"></span><span class="title"> Telemetries - </span>
    <span class="title" id="monitorLastUpdated"></span>
  </div>
  <div class="monitors-wrapper">
    <div id="order-info"></div>
    <table id="dtMonitors" class="table table-striped table-sm" cellspacing="0" width="100%">
      <thead>
        <tr>
          <th scope="col">Name</th>
          <th scope="col">PR</th>
          <th scope="col">Checked</th>
          <th scope="col">Confirmed</th>
          <th scope="col">Unchecked</th>
          <th scope="col">Weight</th>
          <th scope="col">Peers</th>
          <th scope="col">Conf. Median [ms]</th>
          <th scope="col">Difficulty</th>
	        <th scope="col">BPS</th>
          <th scope="col">CPS</th>
          <th scope="col">TSU</th>
          <th scope="col">Version</th>
          <th scope="col">DB</th>
          <th scope="col">Account</th>
        </tr>
      </thead>
      <tfoot>
        <tr>
          <th scope="col">Name</th>
          <th scope="col">PR</th>
          <th scope="col">Checked</th>
          <th scope="col">Confirmed</th>
          <th scope="col">Unchecked</th>
          <th scope="col">Weight</th>
          <th scope="col">Peers</th>
          <th scope="col">Confirmation</th>
          <th scope="col">Difficulty</th>
	        <th scope="col">BPS</th>
          <th scope="col">CPS</th>
          <th scope="col">TSU</th>
          <th scope="col">Version</th>
          <th scope="col">DB</th>
          <th scope="col">Account</th>
        </tr>
      </tfoot>
      <tbody>
      </tbody>
    </table>
  </div>
	<div class="div-footer">
		<p class="footer-text">
			<strong>Theme:</strong> <a href="?theme=default">1</a>,<a href="?theme=darkly">2</a>,<a href="?theme=darkest">3</a> | <span class="link-span" onClick="showOwnerModal()">About Owner</span> | <a href="https://github.com/Joohansson/">Github Projects</a> | <a href="https://nano.org">Nano Home</a> | <a href="https://nanolinks.info">Nano Guide</a> | <span class="link-span" onClick="showDonateModal()">Send me a donation</span>
		</p>
	</div>
</div>
<script>
  //INIT VARS
  $.ajaxSetup({ cache: false });
  var table = null
  var filterPR = true //if only showing pr charts
  var showCharts = true //if charts are visible

  var maxChecked = 0
  var maxConfirmed = 0
  var maxUnchecked = 0
  var maxWeight = 0
  var maxPeers = 0
  var maxConf = 0
  var maxMultiplier = 0
  var maxBPS = 0
  var maxCPS = 0
  var maxTSU = 0

  var minChecked = Number.MAX_VALUE
  var minConfirmed = Number.MAX_VALUE
  var minUnchecked = Number.MAX_VALUE
  var minWeight = Number.MAX_VALUE
  var minPeers = Number.MAX_VALUE
  var minConf = Number.MAX_VALUE
  var minMultiplier = Number.MAX_VALUE
  var minBPS = Number.MAX_VALUE
  var minCPS = Number.MAX_VALUE
  var minTSU = Number.MAX_VALUE

  var firstTimeSort = true
  var firstTimeSearch = true
  var selected_rows = []
  var latestOnlineWeight = 0 //updated from stat json

  function timeConverter(UNIX_timestamp){
      var a = new Date(UNIX_timestamp * 1000);
      var year = a.getFullYear();
      var month = "0" + (a.getMonth()+1).toString();
      var date = "0" + a.getDate();
      var hour = a.getHours();
      var min = "0" + a.getMinutes();
      var sec = "0" + a.getSeconds();
      var time = year + '-' + month.substr(-2) + '-' + date.substr(-2) + ' ' + hour + ':' + min.substr(-2) + ':' + sec.substr(-2) ;
      return time;
  }

  /* Show donate modal */
  function showDonateModal() {
    $(document).psendmodal();
    var account = 'nano_1gur37mt5cawjg5844bmpg8upo4hbgnbbuwcerdobqoeny4ewoqshowfakfo';

    var content =  '<div class="public_link_modal">'+
              '<strong>Scan the QR, <a href="xrb:nano_1gur37mt5cawjg5844bmpg8upo4hbgnbbuwcerdobqoeny4ewoqshowfakfo">open in wallet</a><br/> or click the donation address to copy</strong><br/>'+
              '<img class="donation-qr" id="donation" src="img/donation.png" alt="QR Image"/>'+
              '<div class="form-group">'+
                '<textarea id="shareArea" class="input-large public_link_copy form-control" rows="2" readonly>' + account + '</textarea>'+
              '</div>'+
              '<div class="copied">Succesfully copied to clipboard</div>'+
              '<div class="copied_not">Content could not be copied to clipboard</div>'+
            '</div>';
    var title 	= 'DONATE DEVELOPER';
    $('.modal_title span').html(title);
    $('.modal_content').html(content);

    /* Auto select text */
    var textBox = document.getElementById("shareArea");
    textBox.onfocus = function() {
      textBox.select();

      if (document.execCommand("copy")) {
        /* Inform user about copy */
        document.getElementsByClassName("copied")[0].style.display = "block";
      }
      else {
        document.getElementsByClassName("copied_not")[0].style.display = "block";
      }

      // Work around Chrome's little problem
      textBox.onmouseup = function() {
          // Prevent further mouseup intervention
          textBox.onmouseup = null;
          return false;
      };
    };
    return false;
  }

  /* Show donate modal */
  function showOwnerModal() {
    $(document).psendmodal();
    var content =  '<div class="public_link_modal">'+
              '<strong>Who is hosting this service?</strong><br/>'+
              'A community manager for the Nano Foundation, moderator of <a href="https://www.reddit.com/r/nanocurrency">/r/nanocurrency</a> / <a href="https://chat.nano.org/">nano discord</a> and creator of some other services like <a href="https://nanolinks.info">Nano Links</a>, <a href="https://tools.nanos.cc/">KeyTools</a> and <a href="https://github.com/Joohansson/NanoNodeGraphics">Nano Node Graphics</a>.<br/>'+
              '<br/>If you find any bugs or have feedback, please don\'t hesitate to contact me at reddit or discord! You find me under alias Joohansson, Json or in my <a href="https://discord.gg/RVCuFvc">Discord Support Server</a>.';
    var title 	= 'ABOUT OWNER';
    $('.modal_title span').html(title);
    $('.modal_content').html(content);

    return false;
  }

  //Thousand separator
  function addCommas(nStr) {
    nStr += '';
    var x = nStr.split('.');
    var x1 = x[0];
    var x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
  }

  //Update table info
  function setTableInfo(data) {
    var order = $('#dtMonitors').DataTable().order();
    switch (order[0][0]) {
      case 1:
      case 2:
        var diff = 'Select a row..'

        if (order[0][1] == 'desc') {
          if (data) {
            if (data.currentBlock != null) {
              diff = addCommas(maxChecked - parseInt(data.currentBlock.replace(/,/g, '')))
            }
          }
          $('#order-info').html( 'Max Checked: ' + addCommas(maxChecked) + ' | Diff: ' + diff)
        }
        else {
          if (data) {
            if (data.currentBlock != null) {
              diff = parseInt(data.currentBlock.replace(/,/g, '')) - minChecked
            }
          }
          $('#order-info').html( 'Min Checked: ' + addCommas(minChecked) + ' | Diff: ' + diff)
        }
        break

      case 3:
          var diff = ''
          if (order[0][1] == 'desc') {
            if (data) {
              if (data.cementedBlocks != null) {
                diff = addCommas(maxConfirmed - parseInt(data.cementedBlocks.replace(/,/g, '')))
              }
            }
            $('#order-info').html( 'Max Confirmed: ' + addCommas(maxConfirmed) + ' | Diff: ' + diff)
          }
          else {
            if (data) {
              if (data.cementedBlocks != null) {
                diff = parseInt(data.cementedBlocks.replace(/,/g, '')) - minConfirmed
              }
            }
            $('#order-info').html( 'Min Confirmed: ' + addCommas(minConfirmed) + ' | Diff: ' + diff)
          }
          break

      case 4:
          var diff = ''
          if (order[0][1] == 'desc') {
            if (data) {
              if (data.unchecked != null) {
                diff = addCommas(maxUnchecked - parseInt(data.unchecked.replace(/,/g, '')))
              }
            }
            $('#order-info').html( 'Max Unchecked: ' + addCommas(maxUnchecked) + ' | Diff: ' + diff)
          }
          else {
            if (data) {
              if (data.unchecked != null) {
                diff = parseInt(data.unchecked.replace(/,/g, '')) - minUnchecked
              }
            }
            $('#order-info').html( 'Min Unchecked: ' + addCommas(minUnchecked) + ' | Diff: ' + diff)
          }
          break

      case 5:
          var diff = ''
          if (order[0][1] == 'desc') {
            if (data) {
              if (data.weight != null) {
                diff = addCommas(maxWeight - parseInt(data.weight.replace(/,/g, '')))
              }
            }
            $('#order-info').html( 'Max Weight: ' + addCommas(maxWeight) + ' | Diff: ' + diff)
          }
          else {
            if (data) {
              if (data.weight != null) {
                diff = parseInt(data.weight.replace(/,/g, '')) - minWeight
              }
            }
            $('#order-info').html( 'Min Weight: ' + addCommas(minWeight) + ' | Diff: ' + diff)
          }
          break

      case 6:
          var diff = ''
          if (order[0][1] == 'desc') {
            if (data) {
              if (data.numPeers != null) {
                diff = addCommas(maxPeers - parseInt(data.numPeers.replace(/,/g, '')))
              }
            }
            $('#order-info').html( 'Max Peers: ' + addCommas(maxPeers) + ' | Diff: ' + diff)
          }
          else {
            if (data) {
              if (data.numPeers != null) {
                diff = parseInt(data.numPeers.replace(/,/g, '')) - minPeers
              }
            }
            $('#order-info').html( 'Min Peers: ' + addCommas(minPeers) + ' | Diff: ' + diff)
          }
          break

      case 7:
          var diff = ''
          if (order[0][1] == 'desc') {
            if (data) {
              if (data.confMedian != null) {
                diff = addCommas(maxConf - parseInt(data.confMedian.replace(/,/g, '')))
              }
            }
            $('#order-info').html( 'Max Conf Time: ' + addCommas(maxConf) + ' | Diff: ' + diff)
          }
          else {
            if (data) {
              if (data.confMedian != null) {
                diff = parseInt(data.confMedian.replace(/,/g, '')) - minConf
              }
            }
            $('#order-info').html( 'Min Conf Time: ' + addCommas(minConf) + ' | Diff: ' + diff)
          }
          break

      case 8:
          var diff = ''
          if (order[0][1] == 'desc') {
            if (data) {
              if (data.multiplier != null) {
                diff = addCommas(maxMultiplier - parseFloat(data.multiplier.replace(/,/g, '')))
              }
            }
            $('#order-info').html( 'Max Multiplier: ' + addCommas(parseInt(maxMultiplier*1000)/1000) + ' | Diff: ' + diff)
          }
          else {
            if (data) {
              if (data.multiplier != null) {
                diff = parseFloat(parseFloat(data.multiplier.replace(/,/g, ''))) - minMultiplier
              }
            }
            $('#order-info').html( 'Min Multiplier: ' + addCommas(parseInt(minMultiplier*1000)/1000) + ' | Diff: ' + diff)
          }
          break

      case 9:
          var diff = ''
          if (order[0][1] == 'desc') {
            if (data) {
              if (data.bps != null) {
                diff = addCommas(maxBPS- parseFloat(data.bps.replace(/,/g, '')))
              }
            }
            $('#order-info').html( 'Max BPS: ' + addCommas(parseInt(maxBPS*10)/10) + ' | Diff: ' + diff)
          }
          else {
            if (data) {
              if (data.bps != null) {
                diff = parseFloat(parseFloat(data.bps.replace(/,/g, ''))) - minBPS
              }
            }
            $('#order-info').html( 'Min BPS: ' + addCommas(parseInt(minBPS*10)/10) + ' | Diff: ' + diff)
          }
          break

      case 10:
          var diff = ''
          if (order[0][1] == 'desc') {
            if (data) {
              if (data.cps != null) {
                diff = addCommas(maxCPS- parseFloat(data.cps.replace(/,/g, '')))
              }
            }
            $('#order-info').html( 'Max CPS: ' + addCommas(parseInt(maxCPS*10)/10) + ' | Diff: ' + diff)
          }
          else {
            if (data) {
              if (data.cps != null) {
                diff = parseFloat(parseFloat(data.cps.replace(/,/g, ''))) - minCPS
              }
            }
            $('#order-info').html( 'Min CPS: ' + addCommas(parseInt(minCPS*10)/10) + ' | Diff: ' + diff)
          }
          break

        case 11:
            var diff = ''
            if (order[0][1] == 'desc') {
              if (data) {
                if (data.tsu != null) {
                  diff = addCommas(maxTSU- parseFloat(data.tsu.replace(/,/g, '')))
                }
              }
              $('#order-info').html( 'Max TSU: ' + addCommas(parseInt(maxTSU*10)/10) + ' | Diff: ' + diff)
            }
            else {
              if (data) {
                if (data.tsu != null) {
                  diff = parseFloat(parseFloat(data.tsu.replace(/,/g, ''))) - minTSU
                }
              }
              $('#order-info').html( 'Min TSU: ' + addCommas(parseInt(minTSU*10)/10) + ' | Diff: ' + diff)
            }
            break

      default:
        $('#order-info').html( 'Sort any number column and select a row to compare')
    }
  }

  function updateTableStats() {
    //Update last updated time and monitor count
    $.getJSON( statFile, function(data) {
      $('#monitorLastUpdated').text(timeConverter(data.lastUpdatedUnix))
      var monitors = 0
      if (filterPR) {
        monitors = data.monitorCount_pr
        telemetries = data.telemetryCount_pr
      }
      else {
        monitors = data.monitorCount
        telemetries = data.telemetryCount
      }
      $('#monitorCount').text(monitors)
      $('#telemetryCount').text(telemetries)
      latestOnlineWeight =  data.pStakeOnline
    })
  }

  function initTable() {
    $.fn.dataTable.ext.errMode = 'throw' //disable alert on ajax error
    table = $('#dtMonitors').DataTable({
      ajax: {
        url: monitorFile,
        type: 'GET',
        dataFilter: function(data){
            var json = jQuery.parseJSON(data);
            json.recordsTotal = json.total;
            json.recordsFiltered = json.total;
            json.data = json.list;

            return JSON.stringify( json ); // return JSON string
        },
        dataSrc: function(data) {
          //Correct the data
          $.each(data, function (index, entry) {
            if (entry['isTelemetry'] == true) {
              data[index]['name'] = 'T-'+data[index]['name']
            }
            if(entry['name'] == '') {
              data[index]['name'] = 'N/A'
            }
            else if (entry['name'].length > 24) {
              data[index]['name'] = entry['name'].slice(0, 24) + '..'
            }

            if(entry['PR'] == '') {
              data[index]['PR'] = null
            }
            else if (entry['PR']) {
              data[index]['PR'] = 'X'
            }

            if (entry['currentBlock'] < 0) {
              data[index]['currentBlock'] = null
            }

            else {
              if (entry['currentBlock'] > maxChecked) {
                maxChecked = entry['currentBlock']
              }
              if (entry['currentBlock'] < minChecked) {
                minChecked = entry['currentBlock']
              }
              data[index]['currentBlock'] = addCommas(entry['currentBlock'])
            }

            if (entry['cementedBlocks'] < 0) {
              data[index]['cementedBlocks'] = null
            }
            else {
              if (entry['cementedBlocks'] > maxConfirmed) {
                maxConfirmed = entry['cementedBlocks']
              }
              if (entry['cementedBlocks'] < minConfirmed) {
                minConfirmed = entry['cementedBlocks']
              }
              data[index]['cementedBlocks'] = addCommas(entry['cementedBlocks'])
            }

            if (entry['unchecked'] < 0) {
              data[index]['unchecked'] = null
            }
            else {
              if (entry['unchecked'] > maxUnchecked) {
                maxUnchecked = entry['unchecked']
              }
              if (entry['unchecked'] < minUnchecked) {
                minUnchecked = entry['unchecked']
              }
              data[index]['unchecked'] = addCommas(entry['unchecked'])
            }

            //var weight = parseFloat(Math.round(entry['weight'] * 100) / 100).toFixed(1);
            if(entry['weight'] < 0) {
              data[index]['weight'] = null
            }
            else {
              if (entry['weight'] > maxWeight) {
                maxWeight = entry['weight']
              }
              if (entry['weight'] < minWeight) {
                minWeight = entry['weight']
              }
              data[index]['weight'] = addCommas(parseInt(entry['weight']))
            }

            if (entry['confMedian'] < 0) {
              data[index]['confMedian'] = null
            }
            else {
              if (entry['confMedian'] > maxConf) {
                maxConf = entry['confMedian']
              }
              if (entry['confMedian'] < minConf) {
                minConf = entry['confMedian']
              }
              data[index]['confMedian'] = addCommas(entry['confMedian'])
            }

            if (entry['numPeers'] < 0) {
              data[index]['numPeers'] = null
            }
            else {
              if (entry['numPeers'] > maxPeers) {
                maxPeers = entry['numPeers']
              }
              if (entry['numPeers'] < minPeers) {
                minPeers = entry['numPeers']
              }
              data[index]['numPeers'] = addCommas(entry['numPeers'])
            }

            if (entry['multiplier'] < 0) {
              data[index]['multiplier'] = null
            }
            else {
              if (entry['multiplier'] > maxMultiplier) {
                maxMultiplier = entry['multiplier']
              }
              if (entry['multiplier'] < minMultiplier) {
                minMultiplier = entry['multiplier']
              }
              data[index]['multiplier'] = addCommas(parseInt(entry['multiplier']*1000)/1000)
            }

            if (entry['bps'] < 0) {
              data[index]['bps'] = null
            }
            else {
              if (entry['bps'] > maxBPS) {
                maxBPS = entry['bps']
              }
              if (entry['bps'] < minBPS) {
                minBPS = entry['bps']
              }
              data[index]['bps'] = addCommas(parseInt(entry['bps']*10)/10)
            }

            if (entry['cps'] < 0) {
              data[index]['cps'] = null
            }
            else {
              if (entry['cps'] > maxCPS) {
                maxCPS = entry['cps']
              }
              if (entry['cps'] < minCPS) {
                minCPS = entry['cps']
              }
              data[index]['cps'] = addCommas(parseInt(entry['cps']*10)/10)
            }

            if (entry['tsu'] < 0) {
              data[index]['tsu'] = null
            }
            else {
              if (entry['tsu'] > maxTSU) {
                maxTSU = entry['tsu']
              }
              if (entry['tsu'] < minTSU) {
                minTSU = entry['tsu']
              }
              data[index]['tsu'] = addCommas(parseInt(entry['tsu']*10)/10)
            }

            if (entry['version'] < 0) {
              data[index]['version'] = 'N/A'
            }

            if (entry['storeVendor'] < 0 || entry['storeVendor'] == "") {
              data[index]['storeVendor'] = 'N/A'
            }
          });

          return data;
        }
      },
      paging:         false, // false to disable pagination (or any other option)
      searching:      true, //search function
      scrollX:        true, //horizontal scrolling on small screens,
      scrollY:        '400px',
      scrollCollapse: true,
      info:           false, // hide info below table
      aaSorting:      [1, 'asc'], //default sorting column
      stateSave:      true,
      autoWidth:      true,
      select:         true,
      rowId:          'nanoNodeAccount',
      language: {
            "decimal": ".",
            "thousands": ","
      },
      columns : [
          { data : "name" },
          { data : "PR" },
          { data : "currentBlock", type: "num-fmt" },
          { data : "cementedBlocks", type: "num-fmt" },
          { data : "unchecked", type: "num-fmt" },
          { data : "weight", type: "num-fmt" },
          { data : "numPeers", type: "num-fmt" },
          { data : "confMedian", type: "num-fmt"},
          { data : "multiplier", type: "num-fmt" },
          { data : "bps", type: "num-fmt" },
          { data : "cps", type: "num-fmt" },
          { data : "tsu", type: "num-fmt" },
          { data : "version" },
          { data : "storeVendor" },
          { data : "nanoNodeAccount" }
      ],
      columnDefs: [{
            targets: [0],
            orderData: [0, 1]
        },{
            targets: [1],
            orderData: [1, 2, 3, 5],
            //Encode star logo for PR nodes
            render: function ( data, type, row, meta ) {
                if(type === 'display'){
                  if (data == 'X') {
                    data = '<img class="pr-logo" src="img/star.png" />'
                  }
                }
                return data;
            }
        },{
            targets: [2],
            orderData: [2, 3, 5]
        },{
            targets: [3],
            orderData: [3, 2, 5]
        },{
            targets: [4],
            orderData: [4, 0]
        },{
            targets: [5],
            orderData: [5, 2, 3]
        },{
            targets: [6],
            orderData: [6, 2, 3]
        },{
            targets: [7],
            orderData: [7, 8, 0]
        },{
            targets: [8],
            orderData: [8, 0]
        },{
            targets: [9],
            orderData: [9, 7, 0]
        },{
            targets: [10],
            orderData: [10, 7, 0]
        },{
            targets: [11],
            orderData: [11, 7, 0]
        },{
            targets: [12],
            orderData: [12, 0]
        },{
            targets: [13],
            orderData: [13, 0]
        },{
            targets: [14],
            orderData: [14, 0],
            //Encode href from nano account
            render: function ( data, type, row, meta ) {
                if(type === 'display'){
                  if (data.includes('nano_')) {
                    data = '<a href="' + explorerBaseUrl +  encodeURIComponent(data) + '">' +
                    data.slice(0, 10) + '..' + data.slice(-5) + '</a>'
                  }
                  else {
                    data = '<a href="' + explorerBaseUrl +  encodeURIComponent(data) + '">' +
                    data.slice(0, 9) + '..' + data.slice(-5) + '</a>'
                  }
                }

                return data;
            }
      }],
      //Final row processing
      rowCallback: function(row, data, index) {
        if (filterPR) {
          if (data.PR == 'X') {
              //$(row).find('td').css('color', prColor); //Change weight color of PR nodes
          }
          else {
            $(row).hide()
          }
        }
      }
    })
    $('.dataTables_length').addClass('bs-select')

    // Sort by saved state or default column 1
    var order = table.order();
    if (order[0][0]) {
      table.order( [ order[0][0], order[0][1] ] ).draw()
    }
    else {
      table.order( [ 1, 'desc' ] ).draw()
    }

    updateTableStats()

    //Update info on sort action
    table.on( 'order.dt', function () {
      setTableInfo(null)
      if (!firstTimeSort) {
        var order = $('#dtMonitors').DataTable().order()
        if (order) {
          ga('send', 'event', GATableName, 'sort', 'Column:'+order[0][0].toString())
        }
      }
      else {
        firstTimeSort =  false
      }
    })

    //Update info on row select
    table.on( 'select', function ( e, dt, type, indexes ) {
      if ( type !== 'row' ) {
        return
      }

      //Re-highlight selected row (table theme bug)
      $('#dtMonitors tr.odd.selected').addClass('highlight-odd').siblings().removeClass('highlight-odd','highlight-even')
      $('#dtMonitors tr.even.selected').addClass('highlight-even').siblings().removeClass('highlight-odd','highlight-even')

      //Don't allow multiselect
      var selected = dt.rows({selected: true});
      if ( selected.count() > 1 ) {
        dt.rows(indexes).deselect();
      }
      else {
          var idx = table.cell('.selected', 0).index()
          if (idx != undefined) {
            var data = table.row( idx.row ).data()
            setTableInfo(data)
            if (data) {
              ga('send', 'event', GATableName, 'select', data.name)
            }
          }
          else {
            setTableInfo(null)
          }
      }
    })

    //Update info on row deselect
    table.on( 'deselect', function ( e, dt, type, indexes ) {
      if ( type !== 'row' ) {
        return
      }

      //Remove selected row highlight (table theme bug)
      $('#dtMonitors tr.highlight-odd').removeClass('highlight-odd')
      $('#dtMonitors tr.highlight-even').removeClass('highlight-even')

      //Reset table info
      setTableInfo(null)
    })

    //Check search string
    table.on( 'search.dt', function () {
      if (!firstTimeSearch && table.search().length > 1) {
        ga('send', 'event', GATableName, 'search', table.search())
      }
      else {
        firstTimeSearch =  false
      }
    })
  }

  function updateSwitchStatus() {
    if (showCharts) {
      $('.show-charts').show()
    }
    else {
      //Hide all charts
      $('.show-charts').hide()
    }

    //Show PR charts
    if (filterPR) {
     $('.chart-normal').hide()
     $('.chart-pr').show()
    }
    //Show normal charts
    else {
     $('.chart-normal').show()
     $('.chart-pr').hide()
    }
  }

  function refreshData() {
    //Prevent order and search from being called
    firstTimeSort = true
    firstTimeSearch = true

    maxChecked = 0
    maxConfirmed = 0
    maxUnchecked = 0
    maxWeight = 0
    maxPeers = 0
    maxConf = 0
    maxMultiplier = 0
    maxBPS = 0
    maxCPS = 0
    maxTSU = 0

    minChecked = Number.MAX_VALUE
    minConfirmed = Number.MAX_VALUE
    minUnchecked = Number.MAX_VALUE
    minWeight = Number.MAX_VALUE
    minPeers = Number.MAX_VALUE
    minConf = Number.MAX_VALUE
    minMultiplier = Number.MAX_VALUE
    minBPS = Number.MAX_VALUE
    minCPS = Number.MAX_VALUE
    minTSU = Number.MAX_VALUE

    updateTableStats()

    table.ajax.reload(null, false); // user paging is not reset on reload
  }

  function urlParam(name) {
  	var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href)
    if (results != null) {
      return results[1] || 0
    }
  	return 0
  }

  $(document).ready(function () {
    setTimeout(function() { //Bug where table header is not correct size, small delay
      initTable()
      window.setInterval(refreshData, monitorsUpdateInterval)

      /* Define share link modal jquery function */
      $.fn.psendmodal = function() {
        var modal_structure = '<div class="modal_overlay"></div>'+
                    '<div class="modal_psend">'+
                      '<div class="modal_title">'+
                        '<span>&nbsp;</span>'+
                        '<a href="#" class="modal_close">&times;</a>'+
                      '</div>'+
                      '<div class="modal_content"></div>'+
                    '</div>';

        $('body').append(modal_structure);
        show_modal();

        function show_modal() {
          $('.modal_overlay').stop(true, true).fadeIn();
          $('.modal_psend').stop(true, true).fadeIn();
        }

        window.remove_modal = function() {
          $('.modal_overlay').stop(true, true).fadeOut(500, function() { $(this).remove(); });
          $('.modal_psend').stop(true, true).fadeOut(500, function() { $(this).remove(); });
          return false;
        }

        $(".modal_close").click(function(e) {
          e.preventDefault();
          window.remove_modal();
        });

        $(".modal_overlay").click(function(e) {
          e.preventDefault();
          window.remove_modal();
        });

        $(document).keyup(function(e) {
          if (e.keyCode === 27) { // Esc
            window.remove_modal();
          }
        });
      };

      //Switches
      $('#chart-switch').change(function() {
       if($(this).is(":checked")) {
          showCharts = true
       }
       else {
         showCharts = false
       }
       updateSwitchStatus()
      })

      $('#pr-switch').change(function() {
        if($(this).is(":checked")) {
          filterPR = true
        }
        else {
          filterPR = false
        }
        updateSwitchStatus()
        refreshData()
      });

      //Handle automatic cookies for all checkboxes. Using js.cookie.js plugin
      $('input[type=checkbox]').each(function() {
        var mycookie = Cookies.get($(this).attr('name'));

        if (mycookie == 'true') {
          $(this).prop('checked', true)
          if ($(this).attr('name') == 'chart-switch') {
            showCharts = true
          }
          if ($(this).attr('name') == 'pr-switch') {
            filterPR = true
          }
        }
        else if (mycookie == 'false') {
          $(this).prop('checked', false)
          if ($(this).attr('name') == 'chart-switch') {
            showCharts = false
          }
          if ($(this).attr('name') == 'pr-switch') {
            filterPR = false
          }
        }
      })
      $('input[type=checkbox]').change(function() {
        Cookies.set($(this).attr("name"), $(this).prop('checked'), {
            path: '',
            expires: 365
        })
      })

      updateSwitchStatus()
    }, 100);
  });
  //Tooltip
  $(document).tooltip({
    content: function (callback) {
      callback($(this).prop('title'));
    }
  });
  </script>

  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="js/mdb.min.js"></script>

  <script>
    // this section has to appear before loading dashboard.js

    // Select a theme.
    // uncomment one of the two themes:
    //var netdataTheme = 'default'; // this is white
    //var netdataTheme = 'slate'; // this is dark
    var netdataTheme = 'darkly'; // this is darker

    if (urlParam('theme') != 0) {
      netdataTheme = urlParam('theme')
    }

    // Set the default netdata server.
    // on charts without a 'data-host', this one will be used.
    // the default is the server that dashboard.js is downloaded from.

    // var netdataServer = 'http://my.server:19999/';
  </script>

  <!--
      Load dashboard.js

      to host this HTML file on your web server,
      you have to load dashboard.js from the netdata server.

      So, pick one the two below
      If you pick the first, set the server name/IP.

      The second assumes you host this file on /usr/share/netdata/web
      and that you have chown it to be owned by netdata:netdata
  -->
  <!--<script type="text/javascript" src="http://remotenode.nano:19999/dashboard.js"></script>-->
  <!--<script type="text/javascript" src="dashboard.js?v20190816"></script>-->
  <script type="text/javascript">var netdataServer = "https://node.nanoticker.info";</script>
  <script type="text/javascript" src="https://node.nanoticker.info/dashboard_custom.js?v20200617-1"></script>

  <script>
  // Set options for TV operation
  // This has to be done, after dashboard.js is loaded

  // destroy charts not shown (lowers memory on the browser)
  NETDATA.options.current.destroy_on_hide = false;

  // set this to false, to always show all dimensions
  NETDATA.options.current.eliminate_zero_dimensions = false;

  // lower the pressure on this browser
  NETDATA.options.current.concurrent_refreshes = false;

  // if the tv browser is too slow (a pi?)
  // set this to false
  NETDATA.options.current.parallel_refresher = true;

  // always update the charts, even if focus is lost
  NETDATA.options.current.stop_updates_when_focus_is_lost = false;

  // Since you may render charts from many servers and any of them may
  // become offline for some time, the charts will break.
  // This will reload the page every RELOAD_EVERY minutes

  var RELOAD_EVERY = 10;
  setTimeout(function(){
      location.reload();
  }, RELOAD_EVERY * 60 * 1000);

  </script>
</body>
</html>
